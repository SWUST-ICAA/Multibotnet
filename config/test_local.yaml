# Multibotnet v4.0.0 本地测试配置文件
# 
# 用于在单机上测试话题和服务通信功能

# IP地址映射
IP:
  self: '*'                    # '*' 表示绑定所有本机IP
  localhost: '127.0.0.1'       # 本地回环

# 发送话题配置
send_topics:
  # 测试IMU数据
  - topic: /test/imu_data
    message_type: sensor_msgs/Imu
    max_frequency: 10
    bind_address: self
    port: 4001
    compression: false
    batch: false

  # 测试速度命令
  - topic: /test/cmd_vel
    message_type: geometry_msgs/Twist
    max_frequency: 20
    bind_address: self
    port: 4002
    compression: false
    batch: false

  # 测试激光雷达数据（启用压缩）
  - topic: /test/laser_scan
    message_type: sensor_msgs/LaserScan
    max_frequency: 10
    bind_address: self
    port: 4003
    compression: true
    batch: false

  # 测试字符串消息（启用批处理）
  - topic: /test/string_msg
    message_type: std_msgs/String
    max_frequency: 100
    bind_address: self
    port: 4004
    compression: false
    batch: true
    batch_size: 10
    batch_timeout_ms: 50

# 接收话题配置
recv_topics:
  # 接收自己发送的IMU数据
  - topic: /received/imu_data
    message_type: sensor_msgs/Imu
    connect_address: localhost
    port: 4001

  # 接收自己发送的速度命令
  - topic: /received/cmd_vel
    message_type: geometry_msgs/Twist
    connect_address: localhost
    port: 4002

  # 接收自己发送的激光雷达数据
  - topic: /received/laser_scan
    message_type: sensor_msgs/LaserScan
    connect_address: localhost
    port: 4003

  # 接收自己发送的字符串消息
  - topic: /received/string_msg
    message_type: std_msgs/String
    connect_address: localhost
    port: 4004

# 提供服务配置
provide_services:
  # 测试SetBool服务
  - service_name: /test/set_bool
    service_type: std_srvs/SetBool
    bind_address: self
    port: 5001

  # 测试GetPlan服务
  - service_name: /test/get_plan
    service_type: nav_msgs/GetPlan
    bind_address: self
    port: 5002
    timeout_ms: 10000

# 请求服务配置
request_services:
  # 请求自己的SetBool服务
  - service_name: /test/set_bool
    service_type: std_srvs/SetBool
    connect_address: localhost
    port: 5001
    timeout_ms: 3000
    max_retries: 3

  # 请求自己的GetPlan服务
  - service_name: /test/get_plan
    service_type: nav_msgs/GetPlan
    connect_address: localhost
    port: 5002
    timeout_ms: 15000
    max_retries: 2

# 高级配置选项
advanced:
  # 压缩配置
  compression:
    enable: true
    type: lz4                 # lz4速度快，适合实时性要求高的场景
    level: 6

  # 批处理配置
  batch:
    enable: true
    size: 10
    timeout_ms: 100

  # 线程池配置
  thread_pool:
    size: 4                   # 使用4个线程

  # 连接池配置
  connection_pool:
    min_connections: 1
    max_connections: 5
    connection_timeout_ms: 3000
    idle_timeout_ms: 60000

  # 性能监控
  performance:
    enable_statistics: true
    statistics_interval_ms: 5000

  # 健康检查
  health_check:
    enable: true
    interval_ms: 5000

  # 重试策略
  retry:
    max_retries: 3
    interval_ms: 1000